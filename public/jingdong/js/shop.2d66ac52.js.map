{"version":3,"sources":["webpack:///./src/views/shop/Cart.vue?1bb9","webpack:///./src/views/shop/Shop.vue","webpack:///./src/views/shop/Content.vue","webpack:///./src/views/shop/Content.vue?9edc","webpack:///./src/views/shop/Cart.vue","webpack:///./src/views/shop/Cart.vue?234a","webpack:///./src/views/shop/Shop.vue?74b4","webpack:///./src/views/shop/Shop.vue?c7f9","webpack:///./src/views/shop/Content.vue?764b","webpack:///./src/components/ShowInfo.vue?72dd","webpack:///./src/components/ShowInfo.vue","webpack:///./src/components/ShowInfo.vue?b9b3"],"names":["class","type","placeholder","handleBack","item","hideBorder","_id","shopName","name","catagoryList","index","key","changeTab","tab","contentList","src","imgUrl","sales","price","oldPrice","productList","count","currentTab","value","route","data","getContentData","params","id","then","result","errno","catch","err","console","log","store","shopId","getters","getProductListById","changeItemToCart","productId","productInfo","number","commit","props","setup","__exports__","show","handleClickCart","changeAllSelected","clearCart","changeSelected","changeProductNum","alt","total","TogoOrderConfirm","useCartListEffect","allSelectedActive","res","i","product","unselected","refValue","useDisplayCountEffect","router","getCountAndPriceByShopId","push","getDataItem","useBackRouterEffect","back","components","ShowInfor","ShowInfo","Content","Cart","render","expressLimit","expressPrice","slogan"],"mappings":"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","file":"js/shop.2d66ac52.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Cart.vue?vue&type=style&index=0&id=2252fb9c&lang=scss&scoped=true\"","<template>\r\n  <div class=\"wrapper\">\r\n    <div class=\"search\">\r\n      <div class=\"search__back iconfont\" @click=\"handleBack\">&#xe679;</div>\r\n      <div class=\"search__content\">\r\n        <div class=\"search__content__icon iconfont\">&#xe600;</div>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"请输入商品名称搜索\"\r\n          class=\"search__content__input\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <ShowInfor :item=\"item\" :hideBorder=\"true\" v-show=\"item._id\"/>\r\n    <Content :shopName=\"item.name\"/>\r\n    <Cart/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter, useRoute } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport { get } from '@/utils/request.js'\r\nimport ShowInfor from '@/components/ShowInfo'\r\nimport Content from './Content'\r\nimport Cart from './Cart.vue'\r\nconst useShopInfoEffect = (route) => {\r\n  const data = reactive({ item: { _id: false } })\r\n  const { item } = toRefs(data)\r\n  const getDataItem = () => {\r\n    get(`/api/shop/${route.params.id}`).then((res) => {\r\n      if (res.data?.errno === 0) {\r\n        data.item = res.data.data\r\n      }\r\n    }).catch((err) => { console.log(err) })\r\n  }\r\n  return { item, getDataItem }\r\n}\r\nconst useBackRouterEffect = (router) => {\r\n  const handleBack = () => {\r\n    router.back()\r\n  }\r\n  return { handleBack }\r\n}\r\nexport default {\r\n  name: 'Shop',\r\n  components: { ShowInfor, Content, Cart },\r\n  setup () {\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const { item, getDataItem } = useShopInfoEffect(route)\r\n    const { handleBack } = useBackRouterEffect(router)\r\n    getDataItem()\r\n\r\n    return { item, handleBack }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/style/viriables.scss';\r\n\r\n.wrapper {\r\n  padding: 0 0.18rem;\r\n}\r\n.search {\r\n  margin: 0.2rem 0 0.04rem 0;\r\n  display: flex;\r\n  line-height: 0.32rem;\r\n  &__back {\r\n    width: 0.32rem;\r\n    font-size: 0.22rem;\r\n    color: #b6b6b6;\r\n  }\r\n  &__content {\r\n    flex: 1;\r\n    display: flex;\r\n    background: $seach-bgcolor;\r\n    border-radius: .16rem;\r\n\r\n    &__icon {\r\n      width: 0.45rem;\r\n      text-align: center;\r\n      font-size: 0.18rem;\r\n      color: $seach-fontColor;\r\n    }\r\n\r\n    &__input {\r\n      flex: 1;\r\n      border: none;\r\n      background: none;\r\n      outline: none;\r\n      padding: 0;\r\n      color: $content-fontcolor;\r\n      font-size: 0.14rem;\r\n        &::placeholder {\r\n        color: $content-fontcolor;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"content\">\r\n    <div class=\"category\">\r\n      <div\r\n        :class=\"{\r\n          category__item: true,\r\n          'category__item--active': item.tab === currentTab,\r\n        }\"\r\n        v-for=\"(item, index) in catagoryList\"\r\n        :key=\"index\"\r\n        @click=\"() => changeTab(item.tab)\"\r\n      >\r\n        {{ item.name }}\r\n      </div>\r\n    </div>\r\n    <div class=\"product\">\r\n      <div class=\"product__item\" v-for=\"item in contentList\" :key=\"item._id\">\r\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\r\n        <div class=\"product__item__content\">\r\n          <h4 class=\"title\">{{ item.name }}</h4>\r\n          <p class=\"sales\">月售{{ item.sales }}</p>\r\n          <p class=\"price\">\r\n            <span class=\"price__yen\">&yen;</span>{{ item.price }}\r\n            <span class=\"price__origin\">&yen;{{ item.oldPrice }}</span>\r\n          </p>\r\n          <div class=\"number\">\r\n            <span\r\n              class=\"number__minus\"\r\n              @click=\"\r\n                () => changeItemToCart(shopId, item._id, item, -1, shopName)\r\n              \"\r\n              >-</span\r\n            >\r\n            {{ productList?.[item._id]?.count?? 0 }}\r\n            <span\r\n              class=\"number__add\"\r\n              @click=\"\r\n                () => changeItemToCart(shopId, item._id, item, 1, shopName)\r\n              \"\r\n              >+</span\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, ref, watchEffect, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { get } from '@/utils/request.js'\r\nconst catagoryList = reactive([\r\n  { name: '全部商品', tab: 'all' },\r\n  { name: '秒杀', tab: 'seckill' },\r\n  { name: '新鲜水果', tab: 'fruit' }\r\n])\r\n// Tab切换相关逻辑\r\nconst useTabEffect = () => {\r\n  const currentTab = ref('all')\r\n  const changeTab = (tab) => {\r\n    currentTab.value = tab\r\n  }\r\n  return { currentTab, changeTab }\r\n}\r\n// 列表内容相关逻辑\r\nconst useCurrentListEffect = (currentTab, route) => {\r\n  const data = reactive({ contentList: [] })\r\n  const getContentData = () => {\r\n    get(`/api/shop/${route.params.id}/products`, { tab: currentTab.value }).then((result) => {\r\n      if (result.data?.errno === 0) {\r\n        data.contentList = result.data?.data\r\n      }\r\n    }).catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n  watchEffect(() => {\r\n    getContentData()\r\n  })\r\n  const { contentList } = toRefs(data)\r\n  return { contentList }\r\n}\r\n\r\n// 购物车相关逻辑\r\nconst useCartEffect = (shopName) => {\r\n  const store = useStore()\r\n  const route = useRoute()\r\n  const shopId = route.params.id\r\n  const productList = computed(() => {\r\n    return store.getters.getProductListById(shopId)\r\n  })\r\n  const changeItemToCart = (shopId, productId, productInfo, number, shopName) => {\r\n    store.commit('changeItemToCart', { shopId, productId, productInfo, number, shopName })\r\n  }\r\n  return { productList, changeItemToCart }\r\n}\r\nexport default {\r\n  name: 'Content',\r\n  props: ['shopName'],\r\n  setup (props) {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { currentTab, changeTab } = useTabEffect()\r\n    const { contentList } = useCurrentListEffect(currentTab, route)\r\n    const { productList, changeItemToCart } = useCartEffect(props.shopName)\r\n    return {\r\n      catagoryList,\r\n      currentTab,\r\n      changeTab,\r\n      contentList,\r\n      productList,\r\n      shopId,\r\n      changeItemToCart\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/viriables.scss\";\r\n@import \"@/style/mixins.scss\";\r\n.content {\r\n  display: flex;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0.5rem;\r\n  top: 1.54rem;\r\n  .category {\r\n    overflow-y: scroll;\r\n    width: 0.76rem;\r\n    height: 100%;\r\n    background: $seach-bgcolor;\r\n    border-radius: .02rem;\r\n    &__item {\r\n      line-height: 0.4rem;\r\n      text-align: center;\r\n      color: $content-fontcolor;\r\n      font-size: 0.14rem;\r\n      &--active {\r\n        background: $bgColor;\r\n      }\r\n    }\r\n  }\r\n  .product {\r\n    flex: 1;\r\n    overflow-y: scroll;\r\n\r\n    &__item {\r\n      padding: 0.12rem 0;\r\n      margin: 0 0.18rem 0 0.16rem;\r\n      border-bottom: 0.01rem solid $content-bgcolor;\r\n      display: flex;\r\n      &__img {\r\n        height: 0.68rem;\r\n        width: 0.68rem;\r\n      }\r\n      &__content {\r\n        position: relative;\r\n        padding-left: 0.16rem;\r\n        flex: 1;\r\n        color: $content-fontcolor;\r\n        overflow: hidden;\r\n        .title {\r\n          line-height: 0.2rem;\r\n          font-size: 0.14rem;\r\n          margin: 0 0 0.06rem 0;\r\n          @include ellipsis;\r\n        }\r\n        .sales {\r\n          line-height: 0.2rem;\r\n          font-size: 0.12rem;\r\n          margin: 0 0 0.06rem 0;\r\n        }\r\n        .price {\r\n          margin: 0;\r\n          line-height: 0.2rem;\r\n          font-size: 0.14rem;\r\n          color: $hightLight-fontColor;\r\n          &__yen {\r\n            font-size: 0.12rem;\r\n          }\r\n          &__origin {\r\n            padding-left: 0.06rem;\r\n            font-size: 0.12rem;\r\n            text-decoration: line-through;\r\n            color: #999999;\r\n          }\r\n        }\r\n        .number {\r\n          position: absolute;\r\n          bottom: 0;\r\n          right: 0;\r\n          &__minus,\r\n          &__add {\r\n            display: inline-block;\r\n            height: 0.2rem;\r\n            width: 0.2rem;\r\n            border-radius: 50%;\r\n            font-size: 0.16rem;\r\n            text-align: center;\r\n          }\r\n          &__minus {\r\n            margin-right: 0.1rem;\r\n            border: solid 0.01rem #666666;\r\n          }\r\n          &__add {\r\n            margin-left: 0.1rem;\r\n            background: #0091ff;\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Content.vue?vue&type=template&id=2467252c&scoped=true\"\nimport script from \"./Content.vue?vue&type=script&lang=js\"\nexport * from \"./Content.vue?vue&type=script&lang=js\"\n\nimport \"./Content.vue?vue&type=style&index=0&id=2467252c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Fuc\\\\code\\\\JS\\\\jingdong\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2467252c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"mask\" v-if=\"show\" @click=\"handleClickCart\"></div>\r\n  <div class=\"cart\">\r\n    <div class=\"product\" v-if=\"show\">\r\n      <div class=\"product__header\">\r\n        <div\r\n          :class=\"{\r\n            product__header__icon: true,\r\n            iconfont: true,\r\n            'product__header__icon--active': allSelectedActive,\r\n          }\"\r\n          @click=\"changeAllSelected\"\r\n        >\r\n          &#xe608;\r\n        </div>\r\n        <div class=\"product__header__all\" @click=\"changeAllSelected\">全选</div>\r\n        <div class=\"product__header__clear\">\r\n          <span class=\"product__header__clear__btn\" @click=\"clearCart\"\r\n            >清空购物车</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <div class=\"product__gap\"></div>\r\n      <div class=\"product__content\">\r\n        <template v-for=\"item in productList\" :key=\"item?._id\">\r\n          <div class=\"product__content__item\" v-if=\"item.count != 0\">\r\n            <div\r\n              :class=\"{\r\n                item__icon: true,\r\n                iconfont: true,\r\n                'item__icon--active': item?.unselected,\r\n              }\"\r\n              @click=\"() => changeSelected(item._id, item)\"\r\n            >\r\n              &#xe608;\r\n            </div>\r\n            <div class=\"item__info\">\r\n              <img :src=\"item?.imgUrl\" class=\"item__info__img\" />\r\n              <div class=\"item__info__detail\">\r\n                <h4 class=\"title\">{{ item?.name }}</h4>\r\n                <p class=\"price\">\r\n                  <span class=\"price__yen\">&yen;</span>{{ item?.price }}\r\n                  <span class=\"price__origin\">&yen;{{ item?.oldPrice }}</span>\r\n                </p>\r\n              </div>\r\n              <div class=\"item__info__number\">\r\n                <span\r\n                  class=\"minus\"\r\n                  @click=\"() => changeProductNum(item._id, -1)\"\r\n                  >-</span\r\n                >\r\n                {{ item?.count ?? 0 }}\r\n                <span class=\"add\" @click=\"() => changeProductNum(item._id, 1)\"\r\n                  >+</span\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n    <div class=\"check\">\r\n      <div class=\"check__icon\">\r\n        <img\r\n          src=\"http://www.dell-lee.com/imgs/vue3/basket.png\"\r\n          alt=\"\"\r\n          class=\"check__icon__img\"\r\n          @click=\"handleClickCart\"\r\n        />\r\n        <div class=\"check__icon__tag\">{{ total }}</div>\r\n      </div>\r\n      <div class=\"check__info\">\r\n        总计:<span class=\"check__info__price\">&yen; {{ price }}</span>\r\n      </div>\r\n\r\n      <div class=\"check__button\" @click=\"TogoOrderConfirm\">去结算</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\n// 购物车全选、增减相关功能\r\nfunction useCartListEffect (store, shopId) {\r\n  const productList = computed(() => {\r\n    return store.getters.getProductListById(shopId)\r\n  })\r\n  const allSelectedActive = computed(() => {\r\n    let res = false\r\n    const productList = store.getters.getProductListById(shopId)\r\n    if (productList) {\r\n      for (const i in productList) {\r\n        const product = productList[i]\r\n        if (product.unselected) {\r\n          res = true\r\n          break\r\n        }\r\n      }\r\n    }\r\n    return res\r\n  })\r\n  const changeProductNum = (productId, number) => {\r\n    store.commit('changeProductNum', { productId, number, shopId })\r\n  }\r\n  const clearCart = () => {\r\n    store.commit('clearCart', { shopId })\r\n  }\r\n  const changeSelected = (productId) => {\r\n    store.commit('changeSelected', { shopId, productId })\r\n  }\r\n  const changeAllSelected = () => {\r\n    const refValue = allSelectedActive.value\r\n    store.commit('changeAllSelected', { shopId, refValue })\r\n  }\r\n  return {\r\n    productList,\r\n    changeProductNum,\r\n    clearCart,\r\n    changeSelected,\r\n    allSelectedActive,\r\n    changeAllSelected\r\n  }\r\n}\r\n\r\n// 购物车显示、金额计算相关功能\r\nfunction useDisplayCountEffect (store, shopId) {\r\n  const router = useRouter()\r\n  const total = computed(() => {\r\n    return store.getters.getCountAndPriceByShopId(shopId).total\r\n  })\r\n  const price = computed(() => {\r\n    return store.getters.getCountAndPriceByShopId(shopId).price\r\n  })\r\n  const show = ref(false)\r\n  const handleClickCart = () => {\r\n    total.value > 0 ? show.value = !show.value : show.value = false\r\n  }\r\n  const TogoOrderConfirm = () => {\r\n    if (price.value > 0) { router.push('/orderConfirm/' + shopId) }\r\n  }\r\n  return { total, handleClickCart, price, show, TogoOrderConfirm }\r\n}\r\nexport default {\r\n  name: 'Cart',\r\n  setup () {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const {\r\n      productList, changeProductNum, clearCart,\r\n      changeSelected, allSelectedActive, changeAllSelected\r\n    } = useCartListEffect(store, shopId)\r\n    const { total, handleClickCart, price, show, TogoOrderConfirm } = useDisplayCountEffect(store, shopId)\r\n    return {\r\n      shopId,\r\n      total,\r\n      price,\r\n      show,\r\n      handleClickCart,\r\n      productList,\r\n      changeProductNum,\r\n      clearCart,\r\n      changeSelected,\r\n      allSelectedActive,\r\n      changeAllSelected,\r\n      TogoOrderConfirm\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/viriables.scss\";\r\na {\r\n  text-decoration: none;\r\n  color: initial;\r\n}\r\n.mask {\r\n  position: fixed;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  z-index: 1;\r\n}\r\n.cart {\r\n  z-index: 2;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n.product {\r\n  &__header {\r\n    padding: 0 0.18rem;\r\n\r\n    display: flex;\r\n    color: #333;\r\n    font-size: 0.14rem;\r\n    line-height: 0.52rem;\r\n    &__icon {\r\n      color: #0091ff;\r\n      font-size: 0.2rem;\r\n      margin-right: 0.1rem;\r\n      &--active {\r\n        color: #cdcdb4;\r\n      }\r\n    }\r\n    &__clear {\r\n      flex: 1;\r\n      text-align: right;\r\n      &__btn {\r\n        display: inline-block;\r\n      }\r\n    }\r\n  }\r\n  &__gap {\r\n    border-bottom: 0.01rem solid #f1f1f1;\r\n  }\r\n  &__content {\r\n    max-height: 1.95rem;\r\n    overflow-y: auto;\r\n    padding-bottom: 0.16rem;\r\n    &__item {\r\n      padding: 0 0.18rem;\r\n\r\n      display: flex;\r\n      padding-top: 0.16rem;\r\n      .item__icon {\r\n        color: #0091ff;\r\n        line-height: 0.46rem;\r\n        font-size: 0.2rem;\r\n        margin-right: 0.16rem;\r\n        &--active {\r\n          color: #cdcdb4;\r\n        }\r\n      }\r\n      .item__info {\r\n        flex: 1;\r\n        display: flex;\r\n        &__img {\r\n          width: 0.46rem;\r\n          height: 0.46rem;\r\n          margin: 0 0.16rem 0 0;\r\n        }\r\n        &__detail {\r\n          flex: 1;\r\n          line-height: 0.2rem;\r\n          .title {\r\n            font-size: 0.14rem;\r\n            margin: 0;\r\n            color: #333;\r\n          }\r\n          .price {\r\n            margin: 0.06rem 0 0 0;\r\n            color: #e93b3b;\r\n            font-size: 0.14rem;\r\n            &__yen {\r\n              display: inline-block;\r\n              font-size: 0.12rem;\r\n            }\r\n            &__origin {\r\n              display: inline-block;\r\n              padding-left: 0.12rem;\r\n              font-size: 0.2rem;\r\n              color: #999999;\r\n              text-decoration: line-through;\r\n              transform: scale(0.5);\r\n              transform-origin: left 90%;\r\n            }\r\n          }\r\n        }\r\n        &__number {\r\n          line-height: 0.49rem;\r\n          .add,\r\n          .minus {\r\n            display: inline-block;\r\n            width: 0.2rem;\r\n            height: 0.2rem;\r\n            border-radius: 50%;\r\n            line-height: 0.2rem;\r\n            text-align: center;\r\n            font-size: 0.16rem;\r\n          }\r\n          .add {\r\n            background-color: #0091ff;\r\n            color: #fff;\r\n            margin-left: 0.16rem;\r\n          }\r\n          .minus {\r\n            border: 0.01rem solid #333;\r\n            margin-right: 0.16rem;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.check {\r\n  display: flex;\r\n\r\n  height: 0.49rem;\r\n  line-height: 0.49rem;\r\n  color: #333;\r\n  &__icon {\r\n    width: 0.84rem;\r\n    position: relative;\r\n    &__img {\r\n      display: block;\r\n      height: 0.28rem;\r\n      width: 0.26rem;\r\n      margin: 0.105rem auto;\r\n    }\r\n    &__tag {\r\n      position: absolute;\r\n      padding: 0 0.05rem;\r\n      background-color: $hightLight-fontColor;\r\n      border-radius: 50%;\r\n      min-width: 0.2rem;\r\n      height: 0.2rem;\r\n      font-size: 0.12rem;\r\n      line-height: 0.2rem;\r\n      text-align: center;\r\n      color: #fff;\r\n      top: 0.03rem;\r\n      left: 0.45rem;\r\n      transform: scale(0.5);\r\n      transform-origin: left center;\r\n    }\r\n  }\r\n  &__info {\r\n    flex: 1;\r\n    font-size: 0.12rem;\r\n    &__price {\r\n      font-size: 0.18rem;\r\n      color: $hightLight-fontColor;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n  &__button {\r\n    height: 0.49rem;\r\n    width: 0.98rem;\r\n    text-align: center;\r\n    font-size: 0.14rem;\r\n    background: #4fb0f9;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Cart.vue?vue&type=template&id=2252fb9c&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=2252fb9c&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Fuc\\\\code\\\\JS\\\\jingdong\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2252fb9c\"]])\n\nexport default __exports__","import { render } from \"./Shop.vue?vue&type=template&id=eba44b50&scoped=true\"\nimport script from \"./Shop.vue?vue&type=script&lang=js\"\nexport * from \"./Shop.vue?vue&type=script&lang=js\"\n\nimport \"./Shop.vue?vue&type=style&index=0&id=eba44b50&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Fuc\\\\code\\\\JS\\\\jingdong\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-eba44b50\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Shop.vue?vue&type=style&index=0&id=eba44b50&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Content.vue?vue&type=style&index=0&id=2467252c&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShowInfo.vue?vue&type=style&index=0&id=5c026403&lang=scss&scoped=true\"","<template>\r\n  <div class=\"show\">\r\n    <img :src=\"item.imgUrl\" alt=\"\" class=\"show__img\" />\r\n    <div\r\n    :class=\"{'show__content':true,'show__content--bordered':hideBorder?false:true}\"\r\n    >\r\n      <div class=\"show__content__title\">{{ item.name }}</div>\r\n      <div class=\"show__content__tags\">\r\n        <span class=\"tag\">月售:{{ item.sales }}</span>\r\n        <span class=\"tag\">起送:{{ item.expressLimit }}</span>\r\n        <span class=\"tag\">基础运费:{{ item.expressPrice }}</span>\r\n      </div>\r\n      <p class=\"show__content__hightLight\">\r\n        {{ item.slogan }}\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ShowInfo',\r\n  props: ['item', 'hideBorder']\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/viriables.scss\";\r\n\r\n.show {\r\n  padding-top: 0.12rem;\r\n  display: flex;\r\n  &__img {\r\n    width: 0.56rem;\r\n    height: 0.56rem;\r\n    padding: 0 0.16rem 0 0;\r\n  }\r\n  &__content {\r\n    flex: 1;\r\n    padding-bottom: 0.12rem;\r\n    &--bordered {\r\n      border-bottom: 0.01rem solid $content-bgcolor;\r\n    }\r\n    &__title {\r\n      color: $content-fontcolor;\r\n      font-size: 0.16rem;\r\n      line-height: 0.22rem;\r\n      padding-bottom: 0.08rem;\r\n    }\r\n    &__tags {\r\n      color: $content-fontcolor;\r\n      font-size: 0.13rem;\r\n      padding-bottom: 0.08rem;\r\n      .tag {\r\n        padding-right: 0.16rem;\r\n        line-height: 0.18rem;\r\n      }\r\n    }\r\n    &__hightLight {\r\n      color: $hightLight-fontColor;\r\n      font-size: 0.13rem;\r\n      line-height: 0.18rem;\r\n      margin: 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./ShowInfo.vue?vue&type=template&id=5c026403&scoped=true\"\nimport script from \"./ShowInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ShowInfo.vue?vue&type=script&lang=js\"\n\nimport \"./ShowInfo.vue?vue&type=style&index=0&id=5c026403&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Fuc\\\\code\\\\JS\\\\jingdong\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5c026403\"]])\n\nexport default __exports__"],"sourceRoot":""}